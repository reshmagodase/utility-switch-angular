"use strict";!function(t){void 0!==t&&(t.battery={init:function(){octo.battery.initHideCookieOnClose(),octo.battery.initBatteryStatusAndEvents(),octo.battery.initIsLaptopCookieCheck()},_updateBatteryStatus:function(t,o){t.level>=o&&t.charging?$(".fully-charged").addClass("active"):$(".fully-charged").removeClass("active")},_isBatteryCharged:function(t,o){return t>=o},_isCarbonIntensityHigh:function(t){return"high"==t||"very high"==t},_getCarbonIntensityIndex:function(){return fetch("/api/v1/carbon-intensity/forecast/").then((t=>t.json())).then((t=>{var o;return null==(o=t.carbon_intensity)?void 0:o.index}))},initHideCookieOnClose:function(){$(".bubble .close").on("click",(function(t){t.preventDefault(),$(this).closest(".fully-charged").fadeOut(300,(function(){$(this).remove()}));var o=new Date;o.setTime(o.getTime()+6048e5);var n="expires="+o.toUTCString();document.cookie="batteryStatus=true; "+n}))},initBatteryStatusAndEvents:function(){navigator.getBattery&&!octo.utils.getCookie("batteryStatus")&&octo.utils.getCookie("isLaptop")&&navigator.getBattery().then((t=>{octo.battery._updateConstantineSpeech(),t.onchargingchange=function(){octo.battery._updateConstantineSpeech()},t.onlevelchange=function(){octo.battery._updateConstantineSpeech()}}))},initIsLaptopCookieCheck:function(){navigator.getBattery&&navigator.getBattery().then((t=>{if(t.level<1&&!octo.utils.getCookie("isLaptop")){var o=new Date;o.setMonth(o.getMonth()+3);var n="expires="+o.toUTCString();document.cookie="isLaptop=true; "+n}}))},_updateConstantineSpeech:function(){Promise.all([navigator.getBattery(),this._getCarbonIntensityIndex()]).then((t=>{const o=t[0],n=t[1];if(this._isCarbonIntensityHigh(n)&&this._isBatteryCharged(o.level,.8)&&"undefined"!=typeof lottie){$("#animation-fully-charged").children().length>0||lottie.loadAnimation({container:document.getElementById("animation-fully-charged"),renderer:"svg",loop:!0,autoplay:!0,path:"https://static.octopuscdn.com/constantine/animations/bobbing/bobbing.json"});const t=`Hi there! ðŸ‘‹<br />\n                            <span class="bubble--bold">Carbon emissions</span>\n                            from electricity are currently\n                            <span id="carbon-intensity-index" class="bubble--bold">${n}</span>.\n                            This device is over 80% charged, so you might like to unplug for a few hours.`;$("#js-constantine-speech").html(t),octo.battery._updateBatteryStatus(o,.8)}}))}})}(window.octo),window.octo&&window.octo.battery&&$(window.octo.battery.init),function(t){void 0!==t&&(t.clipboard={init:()=>{const t=document.querySelector(".js__clipboard");if(t)try{Clipboard&&Clipboard.isSupported()?new Clipboard(t):t.style.display="none"}catch(o){t.style.display="none"}}})}(window.octo),function(t){void 0!==t&&(t.createObserver=function(t,o){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0px",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const a={root:n||null,rootMargin:e,threshold:i},l=new IntersectionObserver(o,a);l.observe(t)})}(window.octo),function(t){void 0!==t&&(t.debounce=function(t,o,n){let e;return function(){const i=this,a=arguments,l=function(){e=null,n||t.apply(i,a)},d=n&&!e;clearTimeout(e),e=setTimeout(l,o),d&&t.apply(i,a)}})}(window.octo),window.octo.historyBack={init:function(){var t=$("[data-history-back]");t.length&&octo.historyBack.initWindowOpenerClick(t)},initWindowOpenerClick:function(t){t.on("click touch",(t=>{t.preventDefault(),window.history.back()}))}},$(window).on("load",window.octo.historyBack.init),function(t){void 0!==t&&(t.logout={init:()=>{$('form[action="/logout/"]').on("submit",(()=>{localStorage.removeItem("token"),localStorage.removeItem("scopedKrakenToken")}))}})}(window.octo),$(window).on("load",window.octo.logout.init),function(t){void 0!==t&&(t.lottie={init:function(){octo.lottie.loadOutgoingConstantineAnimation()},loadLottieAnimation:function(t,o){if("undefined"!=typeof lottie){$("#"+t).children().length>0||lottie.loadAnimation({container:document.getElementById(t),renderer:"svg",loop:!0,autoplay:!0,path:o})}},loadOutgoingConstantineAnimation:function(){octo.lottie.loadLottieAnimation("outgoing-spinning-constantine","https://static.octopuscdn.com/constantine/animations/spinning/spinning.json")}})}(window.octo),window.octo&&window.octo.lottie&&$(window.octo.lottie.init),window.octo.modal={init:function(){$(".modal").length&&(octo.modal.initModalOpenOnClick(),octo.modal.initModalClose(),octo.modal.initModalCloseWithEscapeKey(),octo.modal.initModalCloseWithNavMask())},initModalOpen:function(t){var o=$(t);o.addClass("modal-open"),o.attr("aria-hidden",!1),$("main").attr("aria-hidden",!0),o.find(".js-modal-close").length&&o.find(".js-modal-close").focus()},initModalOpenOnClick:function(){$(".js-modal-open").on("click",(function(t){t.preventDefault();var o=$(this).data("target");octo.modal.initModalOpen("."+o)}))},initModalClose:function(){$(".js-modal-close").on("click",(function(t){t.preventDefault();var o=$(this).closest(".modal");o.removeClass("modal-open"),o.attr("aria-hidden",!0),$("main").attr("aria-hidden",!1)}))},initModalCloseWithEscapeKey:function(){$(window).on("keyup",(t=>{27===t.keyCode&&$(".modal.modal-open").length>0&&$(".modal").removeClass("modal-open")}))},initModalCloseWithNavMask:function(){$(".modal").on("click",(function(){$(this).removeClass("modal-open")})),$(".modal > div").on("click",(t=>{t.stopPropagation()}))}},$(window.octo.modal.init),$((()=>{let t=null,o=null,n=null,e=null,i=null,a=null,l=!1;const d=()=>{n.addClass("global-header--open"),t.addClass("global-header__menu-button--active").attr("aria-expanded","true"),o.text("Back"),i.attr("aria-hidden","false"),a.find("ul").attr("aria-hidden","false"),$("body").css({overflow:"hidden",height:"100%"}),l=!0},c=()=>{n.removeClass("global-header--open"),t.removeClass("global-header__menu-button--active").attr("aria-expanded","false"),o.text("Menu"),i.attr("aria-hidden","true"),a.find("ul").attr("aria-hidden","true"),$("body").css({overflow:"auto",height:"auto"}),l=!1},r=()=>{t.on("click",(()=>{l?c():d()})),e.on("click",(()=>c()))};t=$(".global-header__menu-button"),o=$(".global-header__menu-copy"),n=$(".global-header"),e=$(".global-header__navigation-background"),i=$(".global-header__navigation-primary"),a=$(".global-header__navigation-secondary"),r()})),window.octo.notifyNativeApp={init:function(){window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(200)}},$(window).on("load",(()=>{window.octo.notifyNativeApp.init()})),window.octo.windowOpener={init:function(){var t=$("[data-window-open]");t.length&&octo.windowOpener.initWindowOpenerClick(t)},initWindowOpenerClick:function(t){t.on("click touch",(t=>{t.preventDefault();const o=$(t.target),n=o.data("url"),e=o.data("target")||"",i=o.data("features")||"";n&&window.open(n,e,i)}))}},$(window).on("load",window.octo.windowOpener.init),window.octo.youtubeLazyLoader={init:function(){$(".js-youtube-lazy-load").length&&octo.youtubeLazyLoader.initYoutubeLazyLoader()},initYoutubeLazyLoader:function(){$(".js-youtube-lazy-load").each(((t,o)=>{o.addEventListener("click",(function(){var t=document.createElement("iframe");t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen",""),t.setAttribute("src","https://www.youtube.com/embed/"+this.dataset.youtubeid+"?rel=0&showinfo=0&autoplay=1"),t.setAttribute("height",this.clientHeight),t.setAttribute("width",this.clientWidth),this.innerHTML="",this.appendChild(t)}))}))}},$(window.octo.youtubeLazyLoader.init);